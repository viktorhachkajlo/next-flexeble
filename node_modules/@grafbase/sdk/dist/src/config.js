"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FederatedGraphConfig = exports.GraphConfig = void 0;
var auth_1 = require("./auth");
var cache_1 = require("./cache");
var cors_1 = require("./cors");
var operation_limits_1 = require("./operation-limits");
var experimental_1 = require("./experimental");
var introspection_1 = require("./introspection");
var trusted_documents_1 = require("./trusted-documents");
var codegen_1 = require("./codegen");
var rateLimiting_1 = require("./rateLimiting");
/**
 * Defines the complete Grafbase configuration.
 */
var GraphConfig = /** @class */ (function () {
    /** @deprecated use `graph` instead of `schema` */
    function GraphConfig(input) {
        this.graph = 'graph' in input ? input.graph : input.schema;
        if (input.auth) {
            this.auth = new auth_1.Authentication(input.auth);
        }
        if (input.operationLimits) {
            this.operationLimits = new operation_limits_1.OperationLimits(input.operationLimits);
        }
        if (input.cache) {
            this.cache = new cache_1.GlobalCache(input.cache);
        }
        if (input.trustedDocuments) {
            this.trustedDocuments = new trusted_documents_1.TrustedDocuments(input.trustedDocuments);
        }
        if (input.experimental) {
            this.experimental = new experimental_1.Experimental(input.experimental);
        }
        if (input.introspection !== undefined) {
            this.introspection = new introspection_1.Introspection({ enabled: input.introspection });
        }
        if (input.codegen) {
            this.codegen = new codegen_1.Codegen(input.codegen);
        }
        if (input.cors) {
            this.cors = new cors_1.Cors(input.cors);
        }
        if (input.rateLimiting) {
            this.rateLimiting = new rateLimiting_1.RateLimiting(input.rateLimiting);
        }
    }
    GraphConfig.prototype.toString = function () {
        var graph = this.graph.toString();
        var auth = this.auth ? this.auth.toString() : '';
        var operationLimits = this.operationLimits
            ? this.operationLimits.toString()
            : '';
        var trustedDocuments = this.trustedDocuments
            ? this.trustedDocuments.toString()
            : '';
        var cache = this.cache ? this.cache.toString() : '';
        var experimental = this.experimental ? this.experimental.toString() : '';
        var introspection = this.introspection
            ? this.introspection.toString()
            : process.env.GRAFBASE_ENV === 'dev'
                ? new introspection_1.Introspection({ enabled: true })
                : '';
        var codegen = this.codegen ? this.codegen.toString() : '';
        var cors = this.cors ? this.cors.toString() : '';
        var rateLimiting = this.rateLimiting ? this.rateLimiting.toString() : '';
        return "".concat(experimental).concat(auth).concat(operationLimits).concat(trustedDocuments).concat(cache).concat(codegen).concat(cors).concat(introspection).concat(graph).concat(rateLimiting);
    };
    return GraphConfig;
}());
exports.GraphConfig = GraphConfig;
var FederatedGraphConfig = /** @class */ (function () {
    function FederatedGraphConfig(input) {
        this.graph = input.graph;
        if (input.auth) {
            this.auth = new auth_1.AuthenticationV2(input.auth);
        }
        if (input.operationLimits) {
            this.operationLimits = new operation_limits_1.OperationLimits(input.operationLimits);
        }
        if (input.introspection !== undefined) {
            this.introspection = new introspection_1.Introspection({ enabled: input.introspection });
        }
    }
    FederatedGraphConfig.prototype.toString = function () {
        var graph = this.graph.toString();
        var auth = this.auth ? this.auth.toString() : '';
        var operationLimits = this.operationLimits
            ? this.operationLimits.toString()
            : '';
        var introspection = this.introspection
            ? this.introspection.toString()
            : process.env.GRAFBASE_ENV === 'dev'
                ? new introspection_1.Introspection({ enabled: true })
                : '';
        return "".concat(auth).concat(graph).concat(operationLimits).concat(introspection);
    };
    return FederatedGraphConfig;
}());
exports.FederatedGraphConfig = FederatedGraphConfig;
